<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 3956.7666015625073 4066.3085118681756" width="3956.7666015625073" height="4066.3085118681756">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
    </style>
    
  </defs>
  <g transform="translate(747.2619047619119 10) rotate(0 1096.9583740234375 80.19313120897277)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="128.30900993435608px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Backups and point in time recovery</text></g><g transform="translate(10 312.33333333333394) rotate(0 1589.8593466622478 108.33333333333394)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="86.66666666666713px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">1. we can combine a file-system-level backup with backup of the WAL files.</text><text x="0" y="108.33333333333391" font-family="Virgil, Segoe UI Emoji" font-size="86.66666666666713px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text></g><g transform="translate(163.3333333333394 489) rotate(0 1635.5416259765625 83.33333333333303)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="66.66666666666657px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">If recovery is needed, we restore the file system backup and then replay from the backed-up WAL</text><text x="0" y="83.33333333333321" font-family="Virgil, Segoe UI Emoji" font-size="66.66666666666657px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">files to bring the system to a current state.</text></g><g transform="translate(323.3333333333321 739.0000000000018) rotate(0 1039.949951171875 45)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="72.0000000000007px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">We do not need a perfectly consistent file system backup.</text></g><g transform="translate(333.3333333333394 899) rotate(0 1517.875 96.66666666666879)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="77.333333333335px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Continuous backup can be achieved simply by continuing to archive the WAL files</text><text x="0" y="96.66666666666876" font-family="Virgil, Segoe UI Emoji" font-size="77.333333333335px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">(no need to take a full backup frequently).</text></g><g transform="translate(2186.666666666668 1202.3333333333321) rotate(0 776.0083618164062 46.66666666666606)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="74.66666666666569px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">particularly valuable for large databases</text></g><g stroke-linecap="round"><g transform="translate(2466.666666666668 1142.333333333334) rotate(0 -195.22473113729393 -49.65733369529244)"><path d="M1.67 -2.11 C-63.28 -18.59, -325.23 -82.3, -391.09 -98.2 M-0.87 2.91 C-65.86 -14.42, -326.36 -84.8, -392.11 -102.23" stroke="#e03131" stroke-width="4" fill="none"></path></g><g transform="translate(2466.666666666668 1142.333333333334) rotate(0 -195.22473113729393 -49.65733369529244)"><path d="M-365.25 -101.64 C-367.07 -104.1, -373.47 -100.4, -395.84 -98.24 M-360.38 -105.48 C-372.05 -105.4, -381.46 -102.5, -391.88 -100.75" stroke="#e03131" stroke-width="4" fill="none"></path></g><g transform="translate(2466.666666666668 1142.333333333334) rotate(0 -195.22473113729393 -49.65733369529244)"><path d="M-370.56 -81.82 C-371.15 -89.27, -376.24 -90.49, -395.84 -98.24 M-365.69 -85.66 C-375.52 -91.44, -383.37 -94.38, -391.88 -100.75" stroke="#e03131" stroke-width="4" fill="none"></path></g></g><mask></mask><g transform="translate(343.3333333333394 1439) rotate(0 1765.449951171875 85)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="67.99999999999986px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">It is not necessary to replay the WAL entries all the way to the end. We could stop the replay at any</text><text x="0" y="84.99999999999983" font-family="Virgil, Segoe UI Emoji" font-size="67.99999999999986px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">point and have a consistent snapshot of the database as it was at that time</text></g><g transform="translate(3033.3333333333394 1839) rotate(0 436.54998779296875 53.33333333333303)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="85.33333333333283px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">point-in-time recovery</text></g><g stroke-linecap="round"><g transform="translate(3440 1792.333333333334) rotate(0 -134.60006778985007 -77.66014449882096)"><path d="M-1.07 0.32 C-45.86 -25.17, -225.37 -129.83, -270.33 -155.64 M3.54 -1.97 C-41.5 -26.94, -226.64 -128.24, -272.74 -153.27" stroke="#e03131" stroke-width="4" fill="none"></path></g><g transform="translate(3440 1792.333333333334) rotate(0 -134.60006778985007 -77.66014449882096)"><path d="M-242.62 -149.24 C-253.5 -151.25, -259.17 -148.87, -269.03 -152.81 M-242.28 -148.41 C-249.49 -151.92, -259.13 -149.7, -274.5 -151.39" stroke="#e03131" stroke-width="4" fill="none"></path></g><g transform="translate(3440 1792.333333333334) rotate(0 -134.60006778985007 -77.66014449882096)"><path d="M-252.45 -131.23 C-260.59 -137.54, -263.87 -139.54, -269.03 -152.81 M-252.11 -130.4 C-256.52 -138.5, -263.63 -140.9, -274.5 -151.39" stroke="#e03131" stroke-width="4" fill="none"></path></g></g><mask></mask><g transform="translate(2716.666666666668 708.0290492555014) rotate(0 528.9111124674437 48.81880870558143)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="78.11009392893095px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">due to Full Page WAL Logs</text></g><g stroke-linecap="round"><g transform="translate(2666.666666666675 772.3333333333339) rotate(0 -101.78828219662137 0.020035570683830883)"><path d="M0.21 -0.26 C-33.7 -0.21, -169.58 0.23, -203.48 0.3 M-0.04 0.26 C-34.01 0.24, -169.91 0.02, -203.79 -0.08" stroke="#e03131" stroke-width="4" fill="none"></path></g><g transform="translate(2666.666666666675 772.3333333333339) rotate(0 -101.78828219662137 0.020035570683830883)"><path d="M-176.06 -10.55 C-183.55 -6.85, -192.36 -3.76, -203.93 0.13 M-175.85 -10.03 C-186.71 -6.25, -197.73 -1.99, -203.51 0.04" stroke="#e03131" stroke-width="4" fill="none"></path></g><g transform="translate(2666.666666666675 772.3333333333339) rotate(0 -101.78828219662137 0.020035570683830883)"><path d="M-176.11 9.97 C-183.59 7.46, -192.38 4.33, -203.93 0.13 M-175.9 10.49 C-186.69 6.2, -197.69 2.39, -203.51 0.04" stroke="#e03131" stroke-width="4" fill="none"></path></g></g><mask></mask><g transform="translate(320.0000000000073 2162.333333333334) rotate(0 1813.38330078125 144.9999999999991)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="77.33333333333283px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">If we continuously feed the series of WAL files to another machine that has been loaded with</text><text x="0" y="96.66666666666603" font-family="Virgil, Segoe UI Emoji" font-size="77.33333333333283px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">the same base backup file, we have a warm standby system: at any point we can bring up</text><text x="0" y="193.33333333333206" font-family="Virgil, Segoe UI Emoji" font-size="77.33333333333283px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">the second machine and it will have a nearly-current copy of the database.</text></g><g stroke-linecap="round"><g transform="translate(3130 2725.666666666666) rotate(0 115.32112570318168 -121.16685471799246)"><path d="M-2.26 0.71 C36.24 -39.29, 193.25 -198.38, 232.91 -238.72 M1.7 -1.38 C39.62 -42.33, 191.53 -203.44, 230.44 -243.04" stroke="#e03131" stroke-width="4" fill="none"></path></g><g transform="translate(3130 2725.666666666666) rotate(0 115.32112570318168 -121.16685471799246)"><path d="M219.34 -216.21 C224.36 -222.18, 225.05 -235.59, 233.1 -246.08 M219.56 -215.73 C220.37 -219.71, 224.42 -228.93, 228.56 -243.42" stroke="#e03131" stroke-width="4" fill="none"></path></g><g transform="translate(3130 2725.666666666666) rotate(0 115.32112570318168 -121.16685471799246)"><path d="M204.53 -230.41 C215.12 -230.91, 221.26 -239.1, 233.1 -246.08 M204.75 -229.93 C208.58 -230.96, 215.69 -237.24, 228.56 -243.42" stroke="#e03131" stroke-width="4" fill="none"></path></g></g><mask></mask><g transform="translate(2660.0000000000036 2702.3333333333358) rotate(0 209.35000610351562 53.33333333333212)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="85.33333333333209px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">replication</text></g><g transform="translate(55.140653337752155 2742.333333333334) rotate(0 367.7416687011719 108.33333333333394)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="86.66666666666713px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">2. logical backup.</text><text x="0" y="108.33333333333391" font-family="Virgil, Segoe UI Emoji" font-size="86.66666666666713px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text></g><g transform="translate(290.0000000000073 2940.666666666668) rotate(0 1719.3527984619323 50.83333333333394)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="81.33333333333417px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">translating all the data into a set of SQL commands and writing it into a single file</text></g><g transform="translate(2168.3333333333394 3125.666666666666) rotate(0 710.2833251953125 58.33333333333394)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="93.33333333333357px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">pg_dump -Fc dbname &gt; filename</text></g><g transform="translate(2171.666666666668 3279) rotate(0 761.2166442871039 62.87149811884865)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="100.59439699015826px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">pg_restore -d dbname filename</text></g><g transform="translate(465 3575.666666666666) rotate(0 992.1236190796044 55.1001220053422)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="88.16019520854803px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Simpler and quicker way of performing backups</text></g><g transform="translate(458.33333333333576 3758.999999999998) rotate(0 1226.2985992431695 56.121365805777714)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="89.794185289245px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Migration between different major versions of Postgres</text></g><g transform="translate(475.0000000000073 3952.333333333332) rotate(0 772.6222330729051 51.987589267421754)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="83.18014282787526px" fill="#2f9e44" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Backing up a single specific database</text></g><g transform="translate(371.66666666666424 1834) rotate(0 784.6208724975531 55)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="87.99999999999932px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">pg_basebackup -D backup -Ft -z -P</text></g></svg>